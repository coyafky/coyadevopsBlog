---
title: "软件测试的艺术读书笔记-第五章 单元测试"
description: "软件测试的艺术读书笔记-第五章 单元测试"
tags: "软件测试"
date: "2025-05-09"
updateTime: "2025-05-09"
outline: deep
---

# 单元测试
模块测试的目的是将模块的功能与定义模块的功能规格说明或接口规格说明进行比较。

模块测试是对程序中的单个子程序、子程序或过程进行测试的过程，
首先，由于模块测试的注意力一开始集中在程序的较小单元上，因此它是一种管理组合的测试元素的手
其次，模块测试减轻了调试（准确定位并纠正某个已知错误的过程）的难度，这是因为一旦某个错误被发现出来，我们就知道它在哪个具体的模块
再次，模块测试为同时测试多个模块提供了可能，这将并行工程引入软件测试中。

模块测试总体上是面向白盒测试的。
如果对大一点的软件进行测试，例如一个完整的程序（其实是后续的测试过程所针对的对象）​，白盒测试不容易展开
第二个原因是，后续的测试过程着眼于发现其他类型的错误（举例来说，这些错误不一定与程序的逻辑结构有关，比如程序未能满足其用户需求
模块测试的目的是将模块的功能与定义模块的功能规格说明或接口规格说明进行比较。

模块测试是对程序中的单个子程序、子程序或过程进行测试的过程，
首先，由于模块测试的注意力一开始集中在程序的较小单元上，因此它是一种管理组合的测试元素的手段。
其次，模块测试减轻了调试（准确定位并纠正某个已知错误的过程）的难度，这是因为一旦某个错误被发现出来，我们就知道它在哪个具体的模块。
再次，模块测试为同时测试多个模块提供了可能，这将并行工程引入软件测试中。

模块测试总体上是面向白盒测试的。
如果对大一点的软件进行测试，例如一个完整的程序（其实是后续的测试过程所针对的对象），白盒测试不容易展开。
第二个原因是，后续的测试过程着眼于发现其他类型的错误（举例来说，这些错误不一定与程序的逻辑结构有关，比如程序未能满足其用户需求）。

### 测试用例的设计方式
单元测试一般包括五个方面的测试：
 1. 模块接口测试
模块接口测试是单元测试的基础。只有在数据能正确流入、流出模块的前提下，其他测试才有意义。模块接口测试也是集成测试的重点，这里进行的测试主要是为后面打好基础。

测试接口正确与否应该考虑下列因素：

- 输入的实际参数与形式参数的个数是否相同
- 输入的实际参数与形式参数的属性是否匹配
- 输入的实际参数与形式参数的量纲是否一致
- 调用其他模块时所给实际参数的个数是否与被调模块的形参个数相同
- 调用其他模块时所给实际参数的属性是否与被调模块的形参属性匹配
- 调用其他模块时所给实际参数的量纲是否与被调模块的形参量纲一致
- 调用预定义函数时所用参数的个数、属性和次序是否正确
- 是否存在与当前入口点无关的参数引用
- 是否修改了只读型参数
- 对全程变量的定义各模块是否一致
- 是否把某些约束作为参数传递
如果模块功能包括外部输入输出，还应该考虑下列因素：

- 文件属性是否正确
- OPEN/CLOSE 语句是否正确
- 格式说明与输入输出语句是否匹配
- 缓冲区大小与记录长度是否匹配
- 文件使用前是否已经打开
- 是否处理了文件尾
- 是否处理了输入/输出错误
- 输出信息中是否有文字性错误 2. 局部数据结构测试
检查局部数据结构是为了保证临时存储在模块内的数据在程序执行过程中完整、正确，局部功能是整个功能运行的基础。重点是一些函数是否正确执行，内部是否运行正确。局部数据结构往往是错误的根源，应仔细设计测试用例，力求发现下面几类错误：

- 不合适或不相容的类型说明
- 变量无初值
- 变量初始化或省缺值有错
- 不正确的变量名（拼错或不正确地截断）
- 出现上溢、下溢和地址异常 3. 边界条件测试
边界条件测试是单元测试中最重要的一项任务。众所周知，软件经常在边界上失效，采用边界值分析技术，针对边界值及其左、右设计测试用例，很有可能发现新的错误。边界条件测试是一项基础测试，也是后面系统测试中的功能测试的重点，边界测试执行的较好，可以大大提高程序健壮性。
 4. 模块中所有独立执行通路测试
在模块中应对每一条独立执行路径进行测试，单元测试的基本任务是保证模块中每条语句至少执行一次。测试目的主要是为了发现因错误计算、不正确的比较和不适当的控制流造成的错误。具体做法就是程序员逐条调试语句。常见的错误包括：

- 误解或用错了算符优先级
- 混合类型运算
- 变量初值错
- 精度不够
- 表达式符号错
比较判断与控制流常常紧密相关，测试时注意下列错误：

- 不同数据类型的对象之间进行比较
- 错误地使用逻辑运算符或优先级
- 因计算机表示的局限性，期望理论上相等而实际上不相等的两个量相等
- 比较运算或变量出错
- 循环终止条件或不可能出现
- 迭代发散时不能退出
- 错误地修改了循环变量 5. 模块的各条错误处理通路测试
程序在遇到异常情况时不应该退出，好的程序应能预见各种出错条件，并预设各种出错处理通路。如果用户不按照正常操作，程序就退出或者停止工作，实际上也是一种缺陷，因此单元测试要测试各种错误处理路径。

一般这种测试着重检查下列问题：

- 输出的出错信息难以理解
- 记录的错误与实际遇到的错误不相符
- 在程序自定义的出错处理段运行之前，系统已介入
- 异常处理不当
- 错误陈述中未能提供足够的定位出错信息
### 模块测试及集成的顺序
单元测试大多数由开发人员来完成，测试人员技术背景较好或者开发系统软件时可能会安排测试人员进行单元测试，大多数进行的单元测试都是开发人员调试程序或者开发组系统联合调试的过程。

### 对执行模块的建议
在执行单元测试时，应当注意以下几点：

1. 测试应当从模块接口开始，然后逐步深入到模块内部结构
2. 测试用例应当针对模块的特定功能和可能出现的错误类型设计
3. 应当尽可能使用自动化测试工具，提高测试效率和一致性
4. 测试结果应当详细记录，为后续的调试和修改提供依据
5. 单元测试应当与代码审查相结合，提高测试的全面性和有效性